/*
angular-linkify - v0.4.1 - 8/19/2014
Angular filter to linkify urls, "@" usernames, and hashtags.
Copyright (c) 2014 ; Licensed  
*/
angular.module("linkify",[]),angular.module("linkify").filter("linkify",function(){"use strict";function add_protocol(url){return/(([\w]+:)?\/\/)/gi.test(url)===!1&&(url="http://"+url),url}function link_email(email){var wrap=document.createElement("div"),anch=document.createElement("a");return anch.href="mailto:"+email,anch.target="_blank",anch.innerHTML=email,wrap.appendChild(anch),wrap.innerHTML}function linkify(_str,type){if(_str){var _text=_str.replace(/(([\w]+:)?\/\/)?(([\d\w]|%[a-fA-f\d]{2,2})+(:([\d\w]|%[a-fA-f\d]{2,2})+)?@)?([\d\w][-\d\w]{0,253}[\d\w]\.)+[\w]{2,4}(:[\d]+)?(\/([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)*(\?(&?([-+_~.\d\w]|%[a-fA-f\d]{2,2})=?)*)?(#([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)?/gi,function(url){var wrap=document.createElement("div"),anch=document.createElement("a");return anch.href=add_protocol(url),anch.target="_blank",anch.innerHTML=url,wrap.appendChild(anch),wrap.innerHTML});return/([\w-.!#$%&'*+=/=?^_`{|}~]+)@((?:\w+\.)+)(?:[a-zA-Z]{2,4})/gi.test(_str)&&(_text=link_email(_str)),_text?("twitter"===type&&(_text=_text.replace(/(|\s)*@(\w+)/g,'$1<a href="https://twitter.com/$2" target="_blank">@$2</a>'),_text=_text.replace(/(^|\s)*#(\w+)/g,'$1<a href="https://twitter.com/search?q=%23$2" target="_blank">#$2</a>')),"github"===type&&(_text=_text.replace(/(|\s)*@(\w+)/g,'$1<a href="https://github.com/$2" target="_blank">@$2</a>')),_text):""}}return function(text,type){return linkify(text,type)}}).factory("linkify",["$filter",function($filter){"use strict";function _linkifyAsType(type){return function(str){return $filter("linkify")(str,type)}}return{twitter:_linkifyAsType("twitter"),github:_linkifyAsType("github"),normal:_linkifyAsType()}}]).directive("linkify",["$filter","$timeout","linkify",function($filter,$timeout,linkify){"use strict";return{restrict:"A",link:function(scope,element,attrs){var type=attrs.linkify||"normal";$timeout(function(){element.html(linkify[type](element.html()))})}}}]);